---
title: С чего начать?
description: 
published: true
date: 2024-12-16T15:41:55.361Z
tags: 
editor: markdown
dateCreated: 2024-11-04T00:26:45.232Z
---

[Blazor](https://dotnet.microsoft.com/en-us/apps/aspnet/web-apps/blazor) — это мощный инструмент, который помогает создавать удобные и красивые интерфейсы на языке C#. Изначально он задумывался для разработки веб-сайтов, однако мы с вами его будем использовать для того, чтобы строить интерфейсы для наших скриптов! Показывать панели настроек, рисовать оверлеи, показывать всплывающие сообщения. Все это можно делать с использованием специального API, который вам доступен.

## Почему вообще [Blazor](https://dotnet.microsoft.com/en-us/apps/aspnet/web-apps/blazor)?
[Blazor](https://dotnet.microsoft.com/en-us/apps/aspnet/web-apps/blazor) отлично подходит для создания интерфейсов, потому что позволяет совмещать гибкость, удобство и производительность C# с невероятными возможностями, которые предоставляют HTML/CSS и JavaScript в области отрисовки интерфейсов. За последние два десятка лет наверное ни один технологический стек не получал столько инвестиций от крупнейших компаний мира, разумеется это не прошло незамеченным и теперь у нас на руках есть инструмент, который позволяет отрисовать абсолютно все, что только вы можете себе представить. Загляните на тот же https://codepen.io/ - там можно найти много интересных примеров того, что можно собрать из этой "великолепной тройки".

Ну а теперь, когда мы разобрались с тем, что же так хорош HTML/CSS/JS, надо понять какую роль в этом всем играет C#/Blazor.
Если очень вкратце, то Blazor позволяет нам генерировать HTML и связывать мир веб-программирования с миром C#. Наше приложение делится на две части: [Razor](https://learn.microsoft.com/en-us/aspnet/core/blazor/components/?view=aspnetcore-8.0) и C# backend. Razor отвечает за отрисовку данных, а C# - за их подготовку. 

И вот на стыке этих двух технологий и находится EyeAuras, а, следовательно, и ваши скрипты. Теперь давайте чуть подробнее о том, с чем вам непоредственно нужно будер работать. 

## [HTML](https://www.w3schools.com/html/)
Без него никуда, это язык разметки веб-страниц, на котором построен Интернет. Он контролирует то, где расположены элементы веб-страницы, такие как текст, кнопки, таблицы и т.п. Именно с помощью HTML вы задаете "макет" страницы, который дальше будете стилизовать с помощью...

## [CSS](https://www.w3schools.com/html/html_css.asp)
**C**ascading**S**tyle**S**heets - они контролируют как именно будут выглядеть ваши кнопки, текст и все остальное. Именно с их помощью кнопка становится из зеленой - красной, прозрачной или непрозрачной, они контролируют анимации и еще много-много деталей. 

## [Razor](https://learn.microsoft.com/en-us/aspnet/core/blazor/components/?view=aspnetcore-8.0) 
Razor, если упростить, это язык разметки от Microsoft, который позволяет совмещать в одном тексте и HTML, и CSS, и C#

Давайте создадим наш первый компонент и разберем что есть что. Это будут текст и кнопка, которая при нажатии будет увеличивать счетчик.

```html
<h1>Counter</h1>

<p>Current count: @currentCount</p>

<button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

@code {
    private int currentCount = 0;

    private void IncrementCount() => currentCount++;
}
```
![Counter](https://s3.eyeauras.net/media/2024/11/msedge_Wvy12LEOv1bGyAOA.gif)

В одном этом кусочке кода одновременно и HTML, и C# - живут вместе и дополняют друг друга. C# определяет что происходит когда мы нажимаем на кнопку, а HTML/CSS - как все это выглядит.  

# Использование внутри EyeAuras
На момент ноября 2024, в EA существует два основных пути как вы можете использовать Blazor для своих нужд.

## C# Overlay
До недавнего времени (окт. 2024) это был единственный вариант. Тут все просто - вы создаете ауру, добавляете в нее C# Overlay и ... в целом все. EA отвечает за то, чтобы на экране было отрисовано окно, внутри которого будет ваш код. Во всем остальном это самый обычный оверлей, вы точно так же можете задавать условия для отображения через триггеры, настраивать цвет, фон и т.п.

Вот пара примеров оверлеев:
![D](https://i.imgur.com/iaKm2Br.png) ![TL](http://files.eyesquad.net/screenshots/31-10-2024/1YWZKXCaFhEh7SNnSx8YMWjAf.png)

### Example
Давайте набросаем простенький оверлей, в котором будет все та же одна кнопка и счетчик.
- Создайте ауру
- Добавьте в нее C# Overlay
![Add C# Overlay](https://s3.eyeauras.net/media/2024/11/msedge_zVrveCuFgBbtBB68.png)
- В целом, готово - на экране отрисуется оверлей с кликабельной кнопкой
![C# Overlay Example](https://s3.eyeauras.net/media/2024/11/Code_MJvkplH0Iiqmm9SV.png)


> ВАЖНО! Учтите, что текстовый редактор, который используется в этом оверлее будет в ближайшее время заменен на новый. Поэтому сильно подробно в структуру оверлея я углубляться не буду, да и в целом больше рекомендую присмотреться к способу номер 2 - скриптам
{.is-info}


## C# Script Action
Ну а теперь, собственно, главное блюдо. Теперь у вас есть возможность создавать не просто один-два оверлея, который управляются триггерами. Теперь вы можете создать целую собственную систему окон, управляемую скриптами. Они будут отображаться тогда и там, где вам удобно. Выглядеть будут так, как вы хотите. При этом EA будет снимать и митигировать значительную часть той головной боли, которая присутствует когда вы работаете, к примеру, с WPF или WinForms, особенно в части работы с несколькими потоками.

### Example
Теперь давайте посмотрим как можно работать с окнами из ваших скриптов.
- Создайте ауру
- Добавьте в нее действие **OnEnter** **C# Script**
![OnEnter C#](https://s3.eyeauras.net/media/2024/11/EyeAuras_xCVTs8bdg1Y7ZU8T.png)
- Создайте новый Razor Component - имя оставьте по умолчанию, будет **UserComponent**
![New Razor Component](https://s3.eyeauras.net/media/2024/11/EyeAuras_I6MYDieptaZe5a8u.png)
- В **Script.csx** добавьте следующий код:
```csharp
var window = GetService<IDialogWindowUnstableScriptingApi>() // get DialogWindow API
    .CreateWindow<UserComponent>() //create new window with UserComponent inside
    .AddTo(ExecutionAnchors); //destroy when script is stopped

window.WindowStartupLocation = System.Windows.WindowStartupLocation.CenterScreen;
window.ShowDialog();
```
- Нажмите **Run** - вот оно, ваше первое диалоговое окно с использованием Blazor Windows API! Обратите внимание, скрипт остается работать пока окно не закрыто, однако при этом если вы завершите скрипт, то закроется и окно.
![Blazor window](https://s3.eyeauras.net/media/2024/11/EyeAuras_fmFnsjgMCW8P6Z4b.png)

### Что за IDialogWindowUnstableScriptingApi?
Это - основной интерфейс, через который предполагается взаимодействие пользователя с диалоговыми окнами. Есть и альтернативы, но на данный момент это самый высокоуровневый и защищенный вариант - он берет на себя определенное количество дополнительных обязанностей, такое как, к примеру, выгрузку окон при выгрузке ауры, подчистку ресурсов и т.п. 
Да, **Unstable** этот API не потому, что работает плохо, а потому что в силу его новизны в нем вполне могут быть ломающие изменения в будущем. В какой-то момент он станет **Stable**


