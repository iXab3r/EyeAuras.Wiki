---
title: С чего начать?
description: 
published: true
date: 2024-12-20T11:13:30.478Z
tags: 
editor: markdown
dateCreated: 2024-02-20T14:01:34.128Z
---

# Что вообще за скрипты? 
В программе практически с самого ее появления присутствовала возможность писать произвольный код на языке **C#**. В первых версиях (~весна 2021) это было очень больно, очень неудобно, но все равно возможно. Вторая версия вышла весной 2023 и содержала в себе такие штуки как возможность использования внешней IDE для написания программ и значиетельно большие возможности у самих скриптов, к примеру, написание полноценного [пользовательского интерфейса](/en/overlays/custom-ui) с использованием [Blazor](https://dotnet.microsoft.com/en-us/apps/aspnet/web-apps/blazor). По сути, это разблокировало возможность писать действительно мощные скрипты, однако количество препятствий и "особенностей" все еще было слишком велико. 

И сейчас, весной 2024, потихоньку появляется новая версия скриптов. В этом, уже третьем, поколении, возможности самой скриптовой системы огромны - доступно практически все, что сама программма может делать, с возможностью подключения сторонних nuget пакетов, с защитой от крашей и типовых ошибок и многим-многим другим. Входной порог также значительно снижена - добавлены новые API, улучшено диагностирование и т.п.

# Что под капотом
Сама программа построена на платформе [**.NET**](https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-8/overview). Это очень динамично развивающаяся платформа,крайне гибкая и при этом эффективная. В качестве скриптового языка используется [C# 12](https://learn.microsoft.com/en-us/dotnet/csharp/). 

Каждый скрипт, который вы пишете, будет скомпилирован с использованием [Roslyn](https://learn.microsoft.com/en-us/dotnet/csharp/roslyn-sdk/). Большая часть головной боли, связанной с тем, как подключать файлы, что можно делать, а что нельзя и тому подобные вещи уже решены в самой программе, так что вам остается только сосредоточиться на работе с самим скриптом. 

![](https://upload.wikimedia.org/wikipedia/commons/d/d2/C_Sharp_Logo_2023.svg =x100) ![](https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/04/BrandBlazor_nohalo_1000x.png =x100) ![](https://upload.wikimedia.org/wikipedia/commons/2/2a/Roslyn.png =x100)


# Как начать писать скрипты?
В программе есть аж 3 способа, как вы можете запустить свой код. Все они будут запущены внутри [песочницы](/ru/scripting/sandbox). 

### 1. C# Action
Самый простой вариант. Вам всего лишь нужно добавить действие "**C# Script**". Оно (действие) подчиняется всем тем же правилам, что и любые другие, соответственно для того, чтобы запустить его, нужно добавить какой-то триггер. К примеру, можно добавить [Hotkey Is Active](https://wiki.eyeauras.net/en/triggers/hotkey-is-active), повесить его на какую-нибудь кнопку и активировать скрипт при нажатии/зажатии. 

### 2. C# Trigger
Более сложный вариант - ваш скрипт будет исполняться через определенные интервалы времени. При этом ожидается, что в каком-то месте кода вы вернете true/false или null, что приведет к активации и деактивации триггера. Дальше уже на триггер можно навесить действия, в том числе и действия-скрипты. Увеличенная сложность заключается в том, что ваш скрипт запускается постоянно и контролируется только с помощью [Enabling Conditions](/ru/docs/enablingconditions), а значит и писать код нужно более аккуратно, иначе можно оказаться в ситуации, когда скрипт с ошибкой будет постоянно забирать контроль над мышкой/клавиатурой или съест всю доступную память на компьютере.

### 3. C# Overlay
Самый продвинутый вариант скриптов. Помимо всего, что доступно в действиях/триггерах, WebUI позволяет вам написать кастомный пользовательский интерфейс с кнопками, рычажками и полями ввода. UI технология, которая используется для отрисовки называется [Blazor](https://dotnet.microsoft.com/en-us/apps/aspnet/web-apps/blazor) и на 2024 год это лучшее, что инфраструктура **.NET** может предложить. У самой технологии есть несколько проблем, так как идеала не существует, но EyeAuras предлагает несколько решений, который сглаживают эти проблемы и, в конечном счете, ваши возможности ограничены лишь фантазией. Ниже несколько примеров разных форм, которые собраны на **WebUI**

![](https://i.imgur.com/iaKm2Br.png =x500) ![](https://cdn.discordapp.com/attachments/1170312651621023755/1197134740906577981/image.png?ex=65ba299b&is=65a7b49b&hm=40f31b17035b500a9973b6bbc5e6e25a882a9a7fd76961cd26e730481bd0c28a& =x300) ![](https://telegra.ph/file/d83bcbeeac554d2e9b939.png =x300)

![](https://cdn.discordapp.com/attachments/846848467795836969/1168590651798069379/image.png?ex=655251da&is=653fdcda&hm=260bde6f1673493c9ec42573c205716289afdd032c2cc710ba8146fbec1e2793 =x200) ![](https://i.imgur.com/D7Nxmv7.png =x200) 


# Службы-службы
И программа, и API построены на такой штуке как [Dependency Injection](https://en.wikipedia.org/wiki/Dependency_injection). Если человеческим языком, то программа нарезана на маленькие кусочки, каждый из которых отвечает за что-то свое. Как в большом доме, кто-то умеет варить кашу, кто-то шить носки, а кто-то не умеет ничего, но так уж вышло, что он все еще существует. 

---
У каждого в этом доме есть имя, к примеру, если хочется двинуть мышку, то нужно обратиться к [ISendInputUnstableScriptingApi](https://docs.eyeauras.net/api/EyeAuras.Roxy.Api.ISendInputUnstableScriptingApi.html) и вызвать [MouseMoveTo](https://docs.eyeauras.net/api/EyeAuras.Roxy.Api.ISendInputUnstableScriptingApi.MouseMoveTo.html#EyeAuras_Roxy_Api_ISendInputUnstableScriptingApi_MouseMoveTo_System_Int32_System_Int32_). Если хочется проиграть звук, то это нам к [IPlaySoundScriptingApi](https://docs.eyeauras.net/api/EyeAuras.DefaultAuras.Scripting.IPlaySoundScriptingApi.html). Ответственности всех разные и, как и в жизни, чтобы все получалось очень важно знать правильные имена :) 
В этой документации будут перечислены основные и наиболее полезные, однако полный спектр перечислять смысла нет - в **NuGet** пакете **EyeAuras.SDK** перечислено абсолютно все, что можно использовать и что будет доступно вашим скриптам. 

# Внешние зависимости 
[![](https://learn.microsoft.com/de-de/dotnet/standard/library-guidance/media/nuget/nuget-logo.png =x100)](https://www.nuget.org/)

Если бы каждый программист писал все с нуля, мы бы до сих пор коллективно переизобретали колесо. Поэтому в скриптах есть полная поддержка внешних пакетов. В инфраструктуре **.NET** почти все хранится в [NuGet'e](https://www.nuget.org/), как официальные библиотеки, так и неофициальные. Есть десятки списков полезных пакетов, начать можно с [этого](https://github.com/quozd/awesome-dotnet). 
В скриптах можно подключить практически любые из них. Пока что есть исключения, но я работаю над их устранением. 

> 20 февраля 2024 
> На данный момент поддержка внешних библиотек включена только для alpha-тестеров. Как только этот функционал стабилизируется, он будет включен для всех остальных. я думаю в начале-середине марта эти ограничения будут сняты.
{.is-warning}

