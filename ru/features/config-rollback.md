---
title: История изменений
description: 
published: true
date: 2024-10-30T17:29:03.641Z
tags: 
editor: markdown
dateCreated: 2024-10-30T17:29:03.641Z
---

# История версий конфигураций и откаты

EyeAuras использует [Git](https://git-scm.com/) для автоматического сохранения конфигурации программы. Это значит, что программа создает "снимки" текущих настроек, которые можно просмотреть или откатить в случае необходимости. Эти "снимки" называются **коммитами**.

## Что такое коммит?

Коммит — это сохранение текущего состояния файлов. Каждый коммит фиксирует изменения: например, если вы изменили какую-то настройку, программа создаст новый коммит, в котором сохранит это изменение. Коммиты упрощают возвращение к старым версиям конфигурации, так как можно выбрать нужный коммит и восстановить состояние файлов на тот момент.

EyeAuras создает коммиты автоматически:
- Периодически (автоматические сохранения помечены как `Periodic save`)
- При выходе из программы

Все коммиты хранятся без ограничений по времени, поэтому можно вернуться к любой из прошлых версий конфигурации.

## Где хранится конфигурация?

Конфигурация программы сохраняется в виде Git-репозитория в папке `config`. Путь зависит от версии EyeAuras:
- **Standalone версия**: `%appdata%\EyeAuras\release\config`
- **Portable и Packed версии**: `data\release\config`

Эта папка содержит историю изменений, а также файлы текущей конфигурации, которые используются программой.

## Как пользоваться "Version history"

![Version history](https://s3.eyeauras.net/media/2024/10/Code_6kH4xNd9ioGMtjIK.png)
![Version history](https://s3.eyeauras.net/media/2024/10/EyeAuras_Y3P3cw9Pi1E0WkMc.png)

"Version history" позволяет:
1. **Просматривать историю коммитов**: можно увидеть все изменения, с датами и описанием.
2. **Выбирать период**: фильтрация по времени позволяет показывать только коммиты за последние день, неделю, месяц и т.д.
3. **Откатывать конфигурацию**: доступно два вида откатов — мягкий (soft) и жёсткий (hard).

### Два вида отката: Soft Reset и Hard Reset

#### Soft Reset (мягкий откат файлов)

**Что это такое**:  
**Soft Reset** позволяет изменить только файлы в папке `config`, чтобы они соответствовали состоянию выбранного коммита, **не изменяя историю коммитов**. Весь журнал изменений остается целым, так что если вы захотите вернуться к текущей версии, то всегда сможете это сделать.

**Как работает Soft Reset**:
1. Программа берет файлы из выбранного коммита и перезаписывает текущие файлы в `config`.
2. История изменений не трогается — все последующие коммиты сохраняются в Git.
3. Можно использовать этот откат, если нужно временно вернуться к прошлой версии, не теряя последних изменений.

**Плюсы**:
- **Безопасность истории**: Все коммиты остаются на месте, и их можно восстановить в любой момент.
- **Гибкость**: Можно временно откатиться на нужную версию, но оставить возможность отката на текущую конфигурацию.

**Минусы**:
- **История остается сложной**: из-за большого количества коммитов может быть трудно разобраться в изменениях.
- **Не удаляет лишние файлы**: если были добавлены новые файлы после выбранного коммита, они останутся в папке `config`.

#### Hard Reset (жёсткий откат с удалением истории)

**Что это такое**:  
**Hard Reset** — это откат, который **удаляет все коммиты после выбранного** и полностью возвращает папку `config` к состоянию на момент выбранного коммита. Это означает, что весь журнал изменений будет "отмотан назад", как будто последующих изменений не было.

**Как работает Hard Reset**:
1. Программа берет файлы из выбранного коммита и заменяет ими текущие файлы в `config`.
2. Все коммиты, сделанные после выбранного, будут удалены из истории.
3. Также удаляются все файлы, которые были добавлены после выбранного коммита.

**Плюсы**:
- **Чистая история**: В истории остаются только нужные коммиты, без лишних данных.
- **Полное восстановление состояния**: Папка `config` будет точной копией выбранного коммита.

**Минусы**:
- **Невозможно отменить**: Все последующие коммиты будут удалены навсегда, и вернуть их не получится.
- **Риск потери данных**: Если важные изменения были сделаны после выбранного коммита, они будут потеряны.

## Как сделать откат
### Soft Reset
![Soft Reset](https://s3.eyeauras.net/media/2024/10/EyeAuras_3fDx8YnlGoQL6K16.png)
1. Откройте "Version history"
2. Выберите нужный коммит из списка
3. Нажмите **"Reset to Selected Commit"**
4. Подтвердите действие. Файлы конфигурации будут откатаны к состоянию выбранного коммита, но история коммитов останется неизменной

### Hard Reset
![Hard Reset](https://s3.eyeauras.net/media/2024/10/EyeAuras_2kw8xktqIXGgOkYG.png)
1. Откройте "Version history" 
2. Выберите коммит, к которому хотите сделать откат
3. Нажмите **"Hard Reset"**
4. Подтвердите действие. Программа удалит все коммиты после выбранного и полностью вернёт папку `config` к состоянию выбранного коммита

После отката программа перезапустится, чтобы применить изменения.
