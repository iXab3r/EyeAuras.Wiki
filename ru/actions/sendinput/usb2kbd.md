---
title: Прошиваем Usb2Kbd
description: 
published: true
date: 2025-06-26T22:51:54.882Z
tags: 
editor: markdown
dateCreated: 2025-06-26T22:51:54.882Z
---

# Зачем?
[Usb2Kbd](https://usb2kbd.ru/) это Arduino-based устройство ввода, которое умеет отправлять нажатия по команде извне. По сути это программируемая клавиатура/мышь.
С помощью этого устройство можно автоматизировать даже те проекты, которые совсем этого не хотят. 


## Почему просто не купить на сайте выше?
Можно приобрести прошитое устройство от автора, однако в силу того, что ранее с разными партиями устройств разнообразные проблемы, более стабильным решением будет создать самому клон - так вы гарантированно получаете рабочее устройство, которое многократно протестировано, на конкретной версии прошивки.

Модель распространения автора подразумевает выдачу каждому покупателю устройства с уникальным VID/PID, комплектующаяся еще и привязанной DLL, что **крайне** неудобно при использовании устройства на нескольких машинах или при распространении аур. 
Да и в оригинальных DLL была целая серия проблем, которые приходилось чинить на стороне программы. На данный момент EyeAuras **НЕ** использует никакие дополнительные библиотеки и работает с устройством напрямую. 

![Close up](https://s3.eyeauras.net/media/2025/06/IMG_3699.jpg =x400)

# Что потребуется?
- 15 минут времени
- Программа для прошивки - Khazama AVR Programmer (есть в архиве)
- Драйвер для USBASP-устройств (есть в архиве)
- Прошивка (есть в архиве)
- **ДВА** (это важно!) **USBASP** устройства на базе **ATMega8** - нужно купить, обычно стоят **~5$** за устройство
- - [US] Amazon - по типу https://www.amazon.com/Ferwooh-Downloader-Programmer-Microcontroller-Adapter/dp/B08DTRPT1Z/
- - [RU] Robot-kit - https://robot-kit.ru/3370/ 
- - Кабель для соединения устройств - обычно идет в комплекте
- - Скрепка или перемычка - нам нужно будет замкнуть контакт **JP2** на прошиваемом устройстве


# Инструкция

### Скачиваем архив с пререквизитами
Ссылка -

### Подготавливаем устройство к прошивке - замыкаем JP2
Выберите одно из устройств. Какое - не важно. Изначально они одинаковые. Одно из них вы будете прошивать, тем самым превращая его в Usb2Kbd, а второе будет выступать в роли программатора. На том устройстве, которое вы **прошиваете**, должен быть замкнут **JP2**. Подойдет любая скрепка, главное убедитесь, что контакты не соприкасаются.
![Target device](https://s3.eyeauras.net/media/2025/06/IMG_3698.jpg =x400)

### Собираем цепь
Теперь возьмите оба устойства и соедините их кабелем. Убедитесь, что он вошел в разъем плотно и не болтается. 
Должно получиться что-то типа такого.
- Target (1) - устройство, на которое мы будем заливать прошивку. Обратите внимание, именно на нем замкнут **JP2**!
- Programmer (2) - устройство, с помощью которого мы будем прошивать **Target (1)**. 
![Wired](https://s3.eyeauras.net/media/2025/06/Photos_qt6wFLu8IX5vnwJi.jpg =x500) 

### Подготавливаем компьютер
Возьмите устройство **Programmer (2)** (которое **БЕЗ** перемычки) и воткните его в любой USB-разъем. 
Должна загореться лампочка (не всегда, зависит от конкретной модели устройства), сначала на устройстве **Programmer (2)**, а затем и на **Target (1)**
p.s. После того, как вы прошьете **Target (1)**, лампочка на нем более гореть не будет! Так можно легко понять кто есть кто. 
![Inserted](https://s3.eyeauras.net/media/2025/06/Photos_vWVE1omRVkxzb9cU.jpg =x500)

### Устанавливаем драйвер USBASP
Нужная версия в архиве в папке `driver`, `InstallDriver.exe`
Установка - Далее, Далее, Далее.
![Driver Install](https://s3.eyeauras.net/media/2025/06/explorer_x6YMxIwuDtx2HV4r.png =x400)

### Устанавливаем Khazama AVR Programmer
Нужная версия уже есть в архиве, `Khazama AVR Programmer.msi`
Установка - Далее, Далее, Далее.
![Khazama Install](https://s3.eyeauras.net/media/2025/06/explorer_VGFKmZaWKioZokGt.png =x400)

### Запускаем Khazama AVR Programmer
Запускаем либо через меню пуск, либо ярлык - без разницы. В результате откроется вот такое маааленькое окошечко. В нем нужно выбрать **ATMEGA8** 
![Khazama UI](https://s3.eyeauras.net/media/2025/06/Khazama_AVR_Programmer_hEAnG7Z8zxvdC2It.png)

### Проверяем, что устройства в порядке и перемычка установлена верно
Нажимаем `Command` => `Fuses and Lock Bits...`. 
![Open Fuses](https://s3.eyeauras.net/media/2025/06/msedge_vceQvSiBBDqVxB5r.png)

В открывшемся окне нажимаем `Read All`. Если все в порядке - через 2-3 секунды программа считает состояние и выдаст что-нибудь типа такого. Если выдается ошибка - что-то сделали до этого шага неверно.
![Fuses](https://s3.eyeauras.net/media/2025/06/Khazama_AVR_Programmer_jM5G6HgYIiMsMVhP.png)

### Загружаем файл прошивки
Итак, финальный шаг. В архиве будет файл `main.hex` - это и есть "мозг" устройства. 
Нажимаем в главном окне `File` => `Load FLASH file to Buffer`.

![Load FLASH](https://s3.eyeauras.net/media/2025/06/msedge_9wdOK2WkAob19fpS.png)

В появившемся окне выбираем `main.hex`
![Loaded flash](https://s3.eyeauras.net/media/2025/06/msedge_wSXfntALbLMrrst4.png)

### Прошиваем.
Осталось только нажать на кнопку `Auto Program`, подождать пару секунд и... готово! 
Теперь это устройство можно использовать в EyeAuras. 
ВАЖНО! Вы залили прошивку на устройство **Target (1)**, то, которое С ПЕРЕМЫЧКОЙ! Именно его мы и будем дальше использовать. И да, не забудьте вытащить эту перемычку, с ней ничего работать не будет. 
Устройство **Programmer (2)** можно отложить в дальний ящик - может еще пригодится, если вы будете прошивать себе еще парочку про запас.
![Flash](https://s3.eyeauras.net/media/2025/06/Code_VJUOeYEfoezd2yXk.gif)

### Вставляем готовое устройство в компьютер
Вытаскиваем **Programmer (2)**, вынимаем перемычку из **Target (1)**, вытаскиваем провод. И теперь это устройство можно вставлять в любой компьютер - **никакие драйвера, программы и т.п. вам более не нужны**. Только само устройство. Это - тот самый готовый к использованию эмулятор ввода. Осталось применить его по назначению!
![Usb2Kbd](https://s3.eyeauras.net/media/2025/06/IMG_3701.jpg =x400)

### Использование в EyeAuras
- Создаем в любой папке ауру. 
- Добавляем в нее действие `Send Sequence`
- Раскрываем `Advanced input settings`
- Выбираем в появившемся списке `Usb2Kbd device` - обратите внимание, что слева от имени отображается восклицательный знак, это значит устройство пока не готово
![SendSequence](https://s3.eyeauras.net/media/2025/06/EyeAuras_u05n6CbeSHjASUB3.png =x600)

- Нажимаем `Install`
- В появившемся окне нажимаем `Detect automatically`
- Нажимаем Ok
![Usb2Kbd settings](https://s3.eyeauras.net/media/2025/06/ShareX_dfe3exVzay6OP5YN.png =x200)

- Если все до этого было сделано верно, то оранжевый восклицательный знак, который был до этого слева, пропадет
- Все! Эти настройки глобальные, так что теперь в любых действиях вы можете выбирать Usb2Kbd и симуляция ввода будет происходить через это устройство. 
![Result](https://s3.eyeauras.net/media/2025/06/EyeAuras_jFqVNV0vHSnfn5dJ.png)

- Удобнее всего выбрать `Usb2Kbd` на уровне папки - так он будет применяться ко всем аурам/деревьям/макросам внутри нее
![Folder properties](https://s3.eyeauras.net/media/2025/06/EyeAuras_X3t0uKQGRPWRfFLN.png)

