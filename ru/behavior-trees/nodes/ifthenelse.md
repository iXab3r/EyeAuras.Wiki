---
title: IfThenElse
description: 1 -> 2 OR 3
published: true
date: 2025-03-30T15:21:08.639Z
tags: 
editor: markdown
dateCreated: 2025-03-30T15:21:08.639Z
---

Нода **IfThenElse** работает по принципу классического «если-то-иначе». Она помогает выбирать, что делать дальше, в зависимости от того, сработало условие или нет.

Левая нода – это условие (**Condition**). Если оно возвращает `Success`, тогда запускается средняя нода (**Then**). Если условие не выполнено (`Failure`), то запускается правая нода (**Else**), если она есть.

![IfThenElse](https://s3.eyeauras.net/media/2025/03/NVIDIA_Overlay_CSBaIFoJJPCR9f6p.png)


## Сравнение с нодами Selector и Sequence:
Ровно то же самое поведение, как на примере выше, можно получить с помощью вот такого дерева:
![IfThenElse via Selector](https://s3.eyeauras.net/media/2025/03/NVIDIA_Overlay_ccGKJyQMUxAsLe2c.png)

или, как вариант, дерево в более компактном виде, предлагаемом EyeAuras
![](https://s3.eyeauras.net/media/2025/03/NVIDIA_Overlay_pcWHNBqeobgqgrd0.png)

Функционально это будет работать точно так же, но есть деталь - когда количество условий накапливается или они становятся сложными, строить вот такие деревья из `Selector` и `Sequence` может быть довольно утомительно. 

### Плюсы:
- Четко отделяет условие и последующие действия (Then/Else), что улучшает читаемость в некоторых случаях.
- Идеально подходит для простых условий и реакций, требующих явного разделения действий.
- Удобна для выражения логики «если-то-иначе» без перебора нескольких вариантов.

### Минусы:
- Не очень подходит для сложных ситуаций с большим количеством условий и возможных действий.
- Если у вас множество действий и условий, Selector или Sequence могут быть удобнее и эффективнее.

В ситуациях, когда нужно просто перебрать варианты действий слева направо и остановиться на первом успешном, лучше использовать ноду `Selector`. Если важно выполнить несколько действий последовательно, подойдёт нода `Sequence`.

## Примеры использования:

### 1. Использование навыка в зависимости от состояния цели:

Например, персонаж должен использовать сильный навык, только если цель оглушена. Если условие не выполняется, персонаж применяет базовую атаку.

- **Condition**: Цель оглушена?
- **Then**: Применить мощный удар
- **Else**: Использовать обычную атаку

Таким образом, персонаж применит нужное действие в зависимости от состояния цели.

### 2. Самолечение при низком здоровье:

Если здоровье персонажа упало ниже определённого уровня, он должен лечиться. В противном случае продолжает атаковать врагов.

- **Condition**: Здоровье персонажа < 30%
- **Then**: Использовать навык лечения
- **Else**: Использовать атакующий навык

Персонаж будет автоматически лечиться в критической ситуации или продолжать бой, если всё в порядке.

В реальности можно использовать гораздо более сложные условия и действия, комбинируя множество проверок и реакций.


## Как это работает:

1. Выполняется левая нода (**Condition**).
2. Если она вернула `Success`, выполняется средняя нода (`Then`).
3. Если вернула `Failure`, выполняется правая нода (`Else`), если такая задана.
4. Нода **IfThenElse** возвращает статус последней выполненной ноды (`Then` или `Else`).
5. Если правой ноды (**Else**) нет, а условие провалено, то вся нода `IfThenElse` возвращает `Failure`.

> Не путайте! **IfThenElse** разделяет условие и два варианта действий, в отличие от ноды **Selector**, которая просто перебирает действия слева направо до первого успешного.
{.is-info}