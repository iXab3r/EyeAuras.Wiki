
---
title: 1.2.2815
description: 
published: true
date: 2022-01-27T00:09:32.280Z
tags: 
editor: markdown
dateCreated: 2022-01-27T00:09:32.200Z
---		
		
### Доработки в триггере **TextSearch**  
- Значительно улучшено качество распознавания и производительность, разница в некоторых случаях кратная по сравнению с предыдущей итерацией  
- Часть настроек распознавания вынесена в пользовательский интерфейс, такие как:  
  - Scale factor - во сколько раз увеличить(**>1**) или уменьшить (**<1**) изображений перед выполнением распознавания. Наилучшими условиями считаются те, когда размер каждого отдельного символа в районе 30 пикселей по вертикали  
  - Binary threshold - бинаризация ЗНАЧИТЕЛЬНО улучшает качество распознавания за счет убирания всех цветовых переходов, оттенков и т.п.  
  - Invert image - позволяет инвертировать изображение перед распознаванием. Идеальный сценарий это черный текст на белом фоне. Инверсия + бинаризация изображения позволяют добиться этого при любом исходном материале  
- В список языков добавлен новый режим “**Numbers**”, который будет стараться найти в тексте только арабские цифры и знаки-разделители  
- Добавлен новый режим проверки найденного текста на совпадения. Ранее поддерживались регулярные выражения, теперь же можно написать выражение на языке **C#** и проверить все, что угодно, к примеру, что найденное число находится в интересующем нас диапазоне  
  - Входной аргумент выражения: string x  
  - Аргумент **x** никогда не будет **NULL**, эта проверка делается движком  и в ваше выражение такое значение попасть не должно  
  - В **x** содержится найденный текст, ожидать в ней можно что угодно - буквы, цифры, разделители, знаки препинания и т.п. Абсолютно все, что удалось распознать в указанном регионе захвата  
  - Доступно все, что можно делать со строками в **.NET -** преобразования в число, проверки на совпадение и т.п.  
  - Пример выражения, проверяющего, что найденный текст начинается с символов *abc*. Обратите внимание, что того же эффекта можно добиться регулярным выражением  
    - **x.StartsWith("abc")**  
  - Пример выражения, проверяющего, что найденное дробное число больше 100.  
    - **double.Parse(x) > 100**  

### Добавлен новый тип действия - **Execute Aura**  
С течением времени ауры становятся все сложнее и сложнее, поэтому все больше и больше появляется инструментов из классического программирования. Новый тип действия **ExecuteAura** это не что иное как вызов метода (или функции)  
Он выполняет последовательно ВСЕ объявленные в слинкованной ауре действия, при этом если одно из них завершилось с ошибкой - вся цепочка будет прервана.  
По факту это позволяет отдельно объявлять некие логические куски ("Идем в город", “Выкладываем вещи на склад”), а отдельно - логику, которая эти действия вызывает.  
Этот инструментарий уже очень давно доступен пользователям экшена **C# Script**, который позволяет делать это и еще очень многое, однако иногда писать скрипт это перебор. К тому же никто не мешает сначала сконфигурировать ауры с действиями и вызывать их через ExecuteAura, а когда логика становится слишком сложной - переходить на скрипты.  

### Добавлен мини-редактор изображений в триггер **ImageSearch**  
Все, кто сталкивались с проблемой поиска картинок с прозрачным фоном понимают какая боль прыгать между аурой и графическим редактором, в котором вы вырезаете фон.  
1. **Добились нужного изображения**  
2. **Сделали скриншот**  
3. **Сохранили его в файл**  
4. **Открыли какой-нибудь Paint.Net**  
5. **Загрузили скриншот**  
6. **Вырезали фон**  
7. **Сохранили отредактированное изображение**  
8. **Загрузили в программу**  

Раньше цепочка действий выглядела именно так и была слишком длинной. Теперь же можно нажать на иконку кисточки возле картинки или сделать правый клик мышью по ней и откроется небольшой встроенный редактор, в котором можно в 2 клика вырезать фон, слегка подрихтовать изображение ластиком и… все. Больше никаких действий не требуется. Теперь цепочка выглядит так:  
1. **Добились нужного изображения**  
2. **Нажали кнопку “Copy From Preview”**  
3. **Открыли встроенный редактор**  
4. **Вырезали фон**  

Это должно значительно экономить время, особенно когда идет этап подбора идеального изображения.  

### Другие доработки  
- [**TextOverlay**] Добавлена возможность обводить текст другим цветом (аутлайн)  
- [**HotkeyTrigger**] Теперь можно указать не какую-то конкретную клавишу, а один из наборов, к примеру “Любая кнопка мыши”. Так что теперь можно, к примеру, сконфигурировать триггер, который будет включаться если пользователь афк  
- [**SendToTelegram**] Добавлена поддержка бот-токенов 2.0 и возможность указывать тип отправляемого сообщения (Markdown, обычный текст и т.п.)  
- Во всех местах где можно указать цвет теперь можно указать и его степень прозрачности  
- Когда оверлей разлочен его теперь можно передвигать стрелками на клавиатуре или WASD  

### Багфиксы  
- [**Image/Color/TextSearch**] TargetFPS теперь округляется не до сотых, а до стотысячных долей секунды, так что теперь доступны задержки больше 100 секунд  
- [**Image/Color/TextSearch**] Поправлена ошибка из-за которой метод захвата **WindowsCapture** был недоступен даже несмотря на корректную версию ОС  
- [**Send***] Поправлена ошибка из-за которой мог сбрасываться метод ввода  
- [WinActive] Поправлена ошибка из-за которой в многокоонных приложениях под фильтр иногда попадали даже те окна чей заголовок не совпадал, если совпадал заголовок другого дочернего окна  
- Поправлен краш при закрытии оверлея через его контекстное меню  
- Поправлена серия крашея связанных с многопоточными проблемами  
- Поправлена ошибка из-за которой не удавалось сохранить свойства действий/триггеров по умолчанию (кнопка **Save As Default**)  